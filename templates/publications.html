{% extends "base.html" %}

{% block content %}
<article>
  <section>
    <h1 class="title">
      {{ section.title }}
    </h1>
      {% for year, publications in paginator.pages | group_by(attribute="year") %}
          <h2>{{ year }}</h2>
        <ul class="publist">
          {% for page in publications %}
          <li class="publist-item">
            {% for author in page.taxonomies.authors %}
                {% if not loop.last %}
                {% if author == config.extra.author %}
                    <strong><a href="{{ get_taxonomy_url(kind="authors", name=author) }}" class="pub-author">{{ author }}</a></strong>,
                {% else %}
                    <a href="{{ get_taxonomy_url(kind="authors", name=author) }}" class="pub-author">{{ author }}</a>,
                {% endif %}
                {% elif loop.last %}
                {% if author == config.extra.author %}
                    <strong><a href="{{ get_taxonomy_url(kind="authors", name=author) }}" class="pub-author">{{ author }}</a></strong>
                {% else %}
                    <a href="{{ get_taxonomy_url(kind="authors", name=author) }}" class="pub-author">{{ author }}</a>
                {% endif %}
                {% endif %}
            {% endfor %}
            (<time>{{ year }}</time>) -
            <a href="{{ page.permalink | safe }}"> {{ page.title }}</a>
            <ul class="publist-links">
              {% if page.extra.url_preprint %}
                <li><a href="{{ page.extra.url_preprint }}"> {{ pub_icons::render_pub_icon(icon="text") }} Preprint</a></li>
              {% endif %}
              {% if page.extra.url_local_pdf %}
                <li><a href="{{ page.permalink | safe }}{{ page.extra.url_local_pdf }}"> {{ pub_icons::render_pub_icon(icon="text") }} Self-archived PDF</a></li>
              {% endif %}
              {% if page.extra.url_pdf %}
                <li><a href="{{ page.extra.url_pdf }}"> {{ pub_icons::render_pub_icon(icon="text") }} Publisher's PDF</a></li>
              {% endif %}
              {% if page.extra.url_code %}
                <li><a href="{{ page.extra.url_code }}">{{ pub_icons::render_pub_icon(icon="git") }} Code</a></li>
              {% endif %}
              {% if page.extra.url_dataset %}
                <li><a href="{{ page.extra.url_dataset }}">{{ pub_icons::render_pub_icon(icon="dataset") }}Dataset</a></li>
              {% endif %}
              {% if page.extra.url_doi %}
                <li><a href="{{ page.extra.url_doi }}">{{ pub_icons::render_pub_icon(icon="doi") }}DOI</a></li>
              {% endif %}
              {% if page.extra.url_doi %}
                <li><a href="https://www.zotero.org/save?type=doi&q={{ page.extra.url_doi }}"> {{ pub_icons::render_pub_icon(icon="zotero") }} Add to Zotero</a></li>
              {% endif %}
            </ul>
          </li>
          {% endfor %}
        </ul>
      {% endfor %}
  </section>
  {% if paginator.next or paginator.previous %}
    <nav class="pagination-nav">
        {% if paginator.previous %}
            <div class="pagination-nav-item">
              <a href="{{ paginator.previous }}" class="pagination-nav-arrow">← Previous</a>
            </div>
        {% endif %}
        {% if paginator.next %}
            <div class="pagination-nav-item">
              <a href="{{ paginator.next }}" class="pagination-nav-arrow">Next →</a>
            </div>
        {% endif %}
    </nav>
  {% endif %}
</article>
{% endblock content %}